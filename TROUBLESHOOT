=TROUBLESHOOTING=

== Server debug ==

Server: debug with jetty in eclipse:
http://docs.codehaus.org/display/JETTY/Debugging+with+the+Maven+Jetty+Plugin+inside+Eclipse

== Client debug ==

Client code: you can debug with gwt hosted mode in eclipse (see DEV-GUIDE for hosted mode instructions).

== Firebug and client log levels ==

To increase client logging add ?log_level=DEBUG# to the url and use firebug firefox extension to see the output.

== Emite troubleshooting ==

See:
http://code.google.com/p/emite/wiki/Troubleshooting

== Liquibase ==

=== Checksum errors ===

Migration Failed: Validation Failed:1 change sets failed MD5Sum Check     src/main/resources/db/liquibase_changelog.xml :: 18 :: vjrj :: (MD5Sum: bde0aa519108e1e3d1f29bb2483bc9)

Don't try to update the liquibase changelogs you have already use. Better create new ones to delete, update, and so on. If you are developing and want to clear the checksums, you can use the command "clearCheckSums". See script/liquibase-* and http://www.liquibase.org/manual/command_line

== Lucene ==

=== Indexes problems during upgrades ===

If you get errors like:

org.ourproject.kune.platf.server.ServerException: Error starting persistence service
(...)
Caused by: org.hibernate.search.SearchException: Unable to open IndexWriter for class org.ourproject.kune.platf.server.domain.User
(...)
Caused by: org.apache.lucene.index.CorruptIndexException: Unknown format version: -7

The indexes in /var/lib/kune/lucen/kune*/indexes/ are not compatible. For the moment the only workaround we now it's to delete the indexes.

== JUnit ==

Running all the Kune test from eclipse I get connection pool exceptions like:
   Connections could not be acquired from the underlying database

We have problems testing all test together from eclipse and using real db (not the h2 memory db)

=== Too many files open ===

If running all the Kune test you get errors about "Too many files open" see:
http://code.google.com/p/gwt-examples/wiki/gwtEclipseFaqs
about how to fix it in your system.

=== Mysql: Caused by: java.sql.SQLException: Access denied for user 'kune'@'localhost' (using password: YES) ===

Check that the password you have use in the database creation it's the same like the src/main/resources/META-INF/persistence.xml. If it's wrong maybe you have to remove the mysql user (DROP USER) and repeat the GRANT senteces of the INSTALL.

If you have this problem with openfire it's not enough to change the password in openfire.xml because probably it's already stored in the ofProperty openfire table and you need to change the password there.

=== Eclipse & GWT ===

If you have some tests with error like "can not be found in source packages. Check the inheritance chain from your module; it may not be inheriting a required module or a module may not be adding its source path entries properly" and you have installed GWTDesigner, uncheck "client classpath": http://code.google.com/webtoolkit/tools/gwtdesigner/preferences/gwt/preferences_builder.html

 Error: Invalid version number "2.0" passed to external.gwtOnLoad(), expected "2.1"; your hosted mode bootstrap file may be out of date; if you are using -noserver try recompiling and redeploying your app
 Fix: clear your browser cache

 Error: method should override method xxx (or similar)
 Fix: Project --> Properties --> Java Compiler ---> Unenable project specific settings

